<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
      .container-fluid {
        min-height: auto;
        border: 1px solid gray;
        border-radius: 10px;
        margin-bottom: 10px;
      }
      .col {
        border: 1px solid red;
        border-radius: 10px;
        margin: 5px;
        padding: 5px 15px;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col">
          <div class="mb-3">
            <label class="form-label">Adınızı Giriniz</label>
            <input
              type="text"
              class="form-control"
              id="adInput"
              placeholder="Adınız"
            />
          </div>
          <div class="mb-3">
            <label class="form-label">Soyadınızı Giriniz</label>
            <input
              type="text"
              class="form-control"
              id="soyadInput"
              placeholder="Soyadınız"
              
            />
          </div>
          <div class="mb-3">
            <label class="form-label">Adres Giriniz</label>
            <input
              type="text"
              class="form-control"
              id="adresInput"
              placeholder="Adresiniz"
            />
          </div>
        </div>
        <div class="col">
          <label class="form-label">Yaşınız</label>
          <select
            id="yasSelect"
            class="form-select"
            aria-label="Default select example"
          >
            <option selected value="">Yaşınızı seçiniz</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
          </select>
        </div>
        <div class="col">
          <button onclick="save()" class="btn btn-primary" style="width: 100%">
            Ekle
          </button>
        </div>
      </div>
    </div>
    <div
      class="container-fluid"
      style="min-height: 10vh; border: 1px solid darkgoldenrod"
    >
      <table class="table table-striped table-hover">
        <thead class="table-dark">
          <tr>
            <th scope="col">id</th>
            <th scope="col">Ad Soyad</th>
            <th scope="col">Adres</th>
            <th scope="col">Yaş</th>
            <th scope="col">işlemler</th>
          </tr>
        </thead>
        <tbody id="tableBody">
          <!-- Burada yapılacaklar javascript içersinde olmalı -->
          <tr>
            <th scope="row">1</th>
            <td>Mark</td>
            <td>Otto</td>
            <td>@mdo</td>
            <td>
              <button type="button" class="btn btn-danger">X</button>
              <!-- Button trigger modal -->
              <button
                type="button"
                class="btn btn-primary"
                data-bs-toggle="modal"
                data-bs-target="#exampleModal"
              >
                Edit
              </button>
              <!-- Modal -->
              <div
                class="modal fade"
                id="exampleModal"
                tabindex="-1"
                aria-labelledby="exampleModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="exampleModalLabel">
                        Müşteriyi Güncelleme Formu
                      </h1>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                      <div class="mb-3">
                        <label class="form-label">Adınızı Giriniz</label>
                        <input
                          type="text"
                          class="form-control"
                          id="adInput"
                          placeholder="Adınız"
                        />
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Soyadınızı Giriniz</label>
                        <input
                          type="text"
                          class="form-control"
                          id="soyadInput"
                          placeholder="Soyadınız"
                        />
                      </div>
                      <div class="mb-3">
                        <label class="form-label">Adres Giriniz</label>
                        <input
                          type="text"
                          class="form-control"
                          id="adresInput"
                          placeholder="Adresiniz"
                        />
                      </div>
                      <label class="form-label">Yaşınız</label>
                      <select
                        id="yasSelect"
                        class="form-select"
                        aria-label="Default select example"
                      >
                        <option selected>Yaşınızı seçiniz</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                      </select>
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-bs-dismiss="modal"
                      >
                        İptal
                      </button>
                      <button type="button" class="btn btn-primary">
                        Güncelle
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <!-- Modal -->
      <div
        class="modal fade"
        id="editModal"
        tabindex="-1"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="exampleModalLabel">
                Müşteriyi Güncelleme Formu
              </h1>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <div class="mb-3">
                <label class="form-label">Adınızı Giriniz</label>
                <input
                  type="text"
                  class="form-control"
                  id="editAdInput"
                  placeholder="Adınız"
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Soyadınızı Giriniz</label>
                <input
                  type="text"
                  class="form-control"
                  id="editSoyadInput"
                  placeholder="Soyadınız"
                />
              </div>
              <div class="mb-3">
                <label class="form-label">Adres Giriniz</label>
                <input
                  type="text"
                  class="form-control"
                  id="editAdresInput"
                  placeholder="Adresiniz"
                />
              </div>
              <label class="form-label">Yaşınız</label>
              <select
                id="editYasSelect"
                class="form-select"
                aria-label="Default select example"
              >
                <option selected value="">Yaşınızı seçiniz</option>
                <option value="21">21</option>
                <option value="22">22</option>
                <option value="23">23</option>
              </select>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                İptal
              </button>
              <button
                type="button"
                onclick="saveEdit()"
                class="btn btn-primary"
              >
                Güncelle
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
      const inputs = [
        document.getElementById("adInput"),
        document.getElementById("soyadInput"),
        document.getElementById("adresInput"),
        document.getElementById("yasSelect"),
      ];

      const editInputs = [
        document.getElementById("editAdInput"),
        document.getElementById("editSoyadInput"),
        document.getElementById("editAdresInput"),
        document.getElementById("editYasSelect"),
      ];

      let values;
      let id = 1;
      let editIndex = null;
      let tableData = [];

      const tableBody = document.getElementById("tableBody");

      

      function save() {
        values = inputs.map((input) => input.value);
        
    
        if (values.some((value) => value.trim() === "" || value === null)) {
          Swal.fire({
            icon: "error",
            title: "Oops...",
            text: "Tüm Alanlar dolu olmalıdır!",
          });
          return;
        }

        tableData.push(values);
        renderTable();

        Swal.fire({
          position: "top-end",
          icon: "success",
          title: "user saved successfully",
          showConfirmButton: false,
          timer: 1700,
        });
        
      }

      function renderTable() {
        tableBody.innerHTML = "";
        id = 1;
        tableData.forEach((row, index) => {
          tableBody.innerHTML += `
            <tr>
            <th scope="row">${id++}</th>
            <td>${row[0]} ${row[1]}</td>
            <td>${row[2]}</td>
            <td>${row[3]}</td>
            <td>
              <button onclick="deleteRow(${index})"class="btn btn-danger">X</button>
              <!-- Button trigger modal -->
              <button
                type="button"
                onclick="editRow(${index})"
                class="btn btn-primary"
                data-bs-toggle="modal"
                data-bs-target="#editModal"
              >
                Edit
              </button>
            </td>
          </tr>
        `;
        });
      }
      function deleteRow(index) {
        Swal.fire({
          title: "Do you want to delete it?",
          showDenyButton: false,
          showCancelButton: true,
          confirmButtonText: "delete",
        }).then((result) => {
          /* Read more about isConfirmed, isDenied below */
          if (result.isConfirmed) {
            Swal.fire("deleted!", "", "success");
            tableData.splice(index, 1);
            renderTable();
          } else if (result.isDenied) {
            Swal.fire("user are not deleted!", "", "info");
          }
        });
      }
      function editRow(index) {
        editIndex = index;
        const row = tableData[index];
        for (let i = 0; i < editInputs.length; i++) {
          editInputs[i].value = row[i];
        }
      }

      function saveEdit() {
        const newValues = editInputs.map((input) => input.value);
        tableData[editIndex] = newValues;
        if (
          newValues.some(
            (newValues) => newValues.trim() === "" || newValues === null
          )
        ) {
          Swal.fire({
            icon: "error",
            title: "Oops...",
            text: "Tüm Alanlar dolu olmalıdır!",
          });
          return;
        }
        renderTable();
        const modalElement = document.getElementById("editModal");
        const modalInstance = bootstrap.Modal.getInstance(modalElement);
        modalInstance.hide();
        Swal.fire({
          position: "top-end",
          icon: "success",
          title: "user updated successfully",
          showConfirmButton: false,
          timer: 1700,
        });
      }

      
    </script>
  </body>
</html>